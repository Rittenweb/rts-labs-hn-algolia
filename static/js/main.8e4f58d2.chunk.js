(this["webpackJsonprts-labs-hn-algolia"]=this["webpackJsonprts-labs-hn-algolia"]||[]).push([[0],{17:function(e,t,s){},24:function(e,t,s){},25:function(e,t,s){"use strict";s.r(t);var r=s(1),c=s(0),a=s.n(c),n=s(4),l=s.n(n),o=(s(17),s(11)),i=s(5),u=Object(i.b)({name:"search",initialState:{searches:[],currentResults:[]},reducers:{newSearch:function(e,t){e.searches.push({term:t.payload.searchTerm,results:t.payload.results}),e.currentResults=t.payload.results},oldSearch:function(e,t){e.currentResults=t.payload.results}}}),h=u.actions,j=h.newSearch,d=h.oldSearch,m=function(e){return e.search.searches},b=function(e){return e.search.currentResults},p=u.reducer,O=s(2);function x(){var e=Object(O.b)(),t=Object(c.useState)(""),s=Object(o.a)(t,2),a=s[0],n=s[1];return Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),fetch("https://hn.algolia.com/api/v1/search?query="+a).then((function(e){return e.json()})).then((function(t){var s=t.hits.filter((function(e){return e._tags.includes("story")||e._tags.includes("comment")}));s=t.hits.map((function(e){var t;return{text:"story"===(t=e._tags.includes("story")?"story":"comment")?e.title:e.comment_text,url:"story"===t?e.url:e.story_url,date:e.created_at,points:e.points,type:t}})),e(j({searchTerm:a,results:s})),n("")})).catch((function(e){console.error("Error:",e)}))},className:"search",children:[Object(r.jsx)("input",{type:"text",name:"text",value:a,onChange:function(e){n(e.target.value)},className:"search-bar"}),Object(r.jsx)("input",{type:"submit",value:"Search",className:"search-button"})]})}function f(){return Object(O.c)(m).length>0?Object(r.jsxs)("div",{className:"helper-text",children:["Story results are ",Object(r.jsx)("span",{className:"g",children:"green"}),". Comment results are ",Object(r.jsx)("span",{className:"b",children:"blue"}),". Click on a ",Object(r.jsx)("span",{className:"r",children:"past search"})," to return to those results."]}):Object(r.jsxs)("div",{className:"helper-text",children:["Enter a term to search for matching HackerNews stories or comments via the"," ",Object(r.jsx)("a",{href:"https://hn.algolia.com/api",children:"HN Search API"})]})}function v(){var e=Object(O.c)(b);return Object(r.jsxs)("div",{className:"search-results",children:[e.length>0&&Object(r.jsx)("div",{className:"search-results-header",children:"Search Results"}),e.map((function(e,t){var s="story"===e.type?"search-result story":"search-result comment",c=new Date(e.date),a=c.getMonth()+"/"+c.getDate()+"/"+c.getFullYear();return Object(r.jsxs)("a",{href:e.url,className:s,children:[Object(r.jsx)("span",{children:a}),Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text}}),Object(r.jsxs)("span",{children:[e.points," Points"]})]},t)}))]})}function g(){var e=Object(O.b)(),t=Object(O.c)(m);return Object(r.jsxs)("div",{className:"past-searches",children:[t.length>0&&Object(r.jsx)("div",{className:"past-searches-header",children:"Your Searches"}),t.map((function(s,c){return Object(r.jsx)("div",{onClick:function(){e(d({results:t[c].results}))},className:"past-search",children:s.term},c)}))]})}s(24);var y=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(x,{}),Object(r.jsx)(f,{}),Object(r.jsxs)("div",{className:"app-body",children:[Object(r.jsx)(g,{}),Object(r.jsx)(v,{})]})]})},N=Object(i.a)({reducer:{search:p}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(O.a,{store:N,children:Object(r.jsx)(y,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.8e4f58d2.chunk.js.map